"use strict";var _createClass=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var utils={debounce:function(t,e,i,n){t.tId&&clearTimeout(),t.tId=setTimeout(function(){t.call(e,i)},n)},throttle:function(n,a,t,s){var r=!1;return function(){if(!r){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];n.apply(a,e),r=!0,setTimeout(function(){r=!1},s)}}},deleteClassName:function(t,e){t.classList.contains(e)&&t.classList.remove(e)},polyfill:function(){"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var n=arguments[i];if(null!=n)for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},writable:!0,configurable:!0})}},PureSwiper=function(){function n(t){var e=this;_classCallCheck(this,n);var i={containerWidth:void 0,delay:4e3};this.options=Object.assign(i,t),this.swiper=document.querySelector("#pureSwiper"),this.swiperContainer=document.querySelector("#swiperContainer"),this.pages=document.querySelectorAll(".page"),this.pages=Array.prototype.slice.call(this.pages),this.pagesNum=this.pages.length,this.pageWidth=this.options.containerWidth||document.documentElement.clientWidth,this.swiper.style.width=this.pageWidth+"px",this.pages.forEach(function(t){t.style.width=e.pageWidth+"px"}),this.currentContainerLeft=-this.pageWidth,this.swiperContainer.style.transform="translate3d("+this.currentContainerLeft+"px, 0, 0)",this.navDots=[],this.newPages=[],this.startX=0,this.timer=void 0,this.autoPlayTimer=void 0,this.TRANSITION_TIME=400,this.DELAY=this.options.delay}return _createClass(n,[{key:"getNewPosition",value:function(){var e=this;this.pageWidth=document.documentElement.clientWidth,this.swiper.style.width=this.pageWidth+"px",this.newPages.forEach(function(t){t.style.width=e.pageWidth+"px"});var i=void 0;this.navDots.forEach(function(t,e){t.classList.contains("active")&&(i=e+1)}),this.currentContainerLeft=-i*this.pageWidth,this.swiperContainer.style.transform="translate3d("+this.currentContainerLeft+"px, 0, 0)"}},{key:"handleWindowResize",value:function(t){utils.debounce(this.getNewPosition,this,t,500)}},{key:"touchEnd",value:function(t){this.autoPlay();var e=t.changedTouches[0].pageX;1<e-this.startX?this.movePage(this.pageWidth,-this.pageWidth*this.pagesNum):e-this.startX<-1&&this.movePage(-this.pageWidth,-this.pageWidth)}},{key:"turnPage",value:function(t){this.swiperContainer.style.transitionDuration=this.TRANSITION_TIME+"ms",this.swiperContainer.style.transform="translate3d("+t+"px, 0, 0)"}},{key:"movePage",value:function(t,e){var i=this,n=function(){i.swiperContainer.style.transitionDuration="0ms",i.currentContainerLeft=e,i.swiperContainer.style.transform="translate3d("+e+"px, 0, 0)",i.changeNavStyle()};if(this.currentContainerLeft>-this.pageWidth&&this.timer||this.currentContainerLeft<-this.pageWidth*this.pagesNum&&this.timer)return clearTimeout(this.timer),void n();this.currentContainerLeft+=t,this.turnPage(this.currentContainerLeft),this.currentContainerLeft>-this.pageWidth||this.currentContainerLeft<-this.pageWidth*this.pagesNum?this.timer=setTimeout(n,this.TRANSITION_TIME):this.timer=setTimeout(this.changeNavStyle.bind(this),this.TRANSITION_TIME)}},{key:"changeNavStyle",value:function(){this.navDots.forEach(function(t){utils.deleteClassName(t,"active")});var t=-this.currentContainerLeft/this.pageWidth;this.navDots[t-1].classList.add("active")}},{key:"createNav",value:function(){var i=this,t=document.createElement("div");t.classList.add("nav"),this.swiperContainer.parentElement.appendChild(t);for(var e=0;e<this.pagesNum;e++)t.innerHTML+='<p class="nav-dot"><span></span></p>';var n=document.querySelectorAll(".nav-dot");this.navDots=Array.prototype.slice.call(n),this.navDots[0].classList.add("active"),this.navDots.forEach(function(t,e){t.addEventListener("click",function(){i.currentContainerLeft=-(e+1)*i.pageWidth,clearInterval(i.autoPlayTimer),i.turnPage(i.currentContainerLeft),i.autoPlay(),i.changeNavStyle()})})}},{key:"copyPage",value:function(){var t=this.pages[0].cloneNode(!0),e=this.pages[this.pagesNum-1].cloneNode(!0);this.swiperContainer.appendChild(t),this.swiperContainer.insertBefore(e,this.pages[0]),this.newPages=Array.prototype.slice.call(this.pages),this.newPages.push(t,e)}},{key:"autoPlay",value:function(){var t=this;this.autoPlayTimer=setInterval(function(){t.movePage(-t.pageWidth,-t.pageWidth)},this.DELAY)}},{key:"init",value:function(){var e=this;this.copyPage(),this.createNav(),this.autoPlay(),this.swiperContainer.addEventListener("touchstart",function(t){clearInterval(e.autoPlayTimer),e.startX=t.touches[0].pageX});var t=utils.throttle(this.touchEnd,this,500);this.swiperContainer.addEventListener("touchend",t),this.options.containerWidth||window.addEventListener("resize",this.handleWindowResize.bind(this))}}]),n}();